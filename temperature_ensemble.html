
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Temperature ensemble</title>
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
body {
    margin: 0;
    background: #0b0f1a;
    font-family: Inter, system-ui, sans-serif;
}

.axis text { fill: #9aa4ad; font-size: 11px; }
.axis path, .axis line { stroke: #2a2f45; }

.tooltip {
    position: absolute;
    background: #111827;
    border: 1px solid #2a2f45;
    border-radius: 6px;
    padding: 8px 10px;
    font-size: 12px;
    color: #e5e7eb;
    pointer-events: none;
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
}

.tooltip .title {
    font-weight: 600;
    margin-bottom: 4px;
}

.tooltip .row {
    display: flex;
    justify-content: space-between;
    gap: 12px;
}
</style>
</head>

<body>
<div id="tooltip" class="tooltip" style="opacity:0;"></div>
<svg width="1100" height="460"></svg>

<script>
const data = {"time": ["2025-12-28T10:00:00+01:00", "2025-12-28T11:00:00+01:00", "2025-12-28T12:00:00+01:00", "2025-12-28T13:00:00+01:00", "2025-12-28T14:00:00+01:00", "2025-12-28T15:00:00+01:00", "2025-12-28T16:00:00+01:00", "2025-12-28T17:00:00+01:00", "2025-12-28T18:00:00+01:00", "2025-12-28T19:00:00+01:00", "2025-12-28T20:00:00+01:00", "2025-12-28T21:00:00+01:00", "2025-12-28T22:00:00+01:00", "2025-12-28T23:00:00+01:00", "2025-12-29T00:00:00+01:00", "2025-12-29T01:00:00+01:00", "2025-12-29T02:00:00+01:00", "2025-12-29T03:00:00+01:00", "2025-12-29T04:00:00+01:00", "2025-12-29T05:00:00+01:00", "2025-12-29T06:00:00+01:00", "2025-12-29T07:00:00+01:00", "2025-12-29T08:00:00+01:00", "2025-12-29T09:00:00+01:00", "2025-12-29T10:00:00+01:00", "2025-12-29T11:00:00+01:00", "2025-12-29T12:00:00+01:00", "2025-12-29T13:00:00+01:00", "2025-12-29T14:00:00+01:00", "2025-12-29T15:00:00+01:00", "2025-12-29T16:00:00+01:00", "2025-12-29T17:00:00+01:00", "2025-12-29T18:00:00+01:00", "2025-12-29T19:00:00+01:00", "2025-12-29T20:00:00+01:00", "2025-12-29T21:00:00+01:00", "2025-12-29T22:00:00+01:00", "2025-12-29T23:00:00+01:00", "2025-12-30T00:00:00+01:00", "2025-12-30T01:00:00+01:00", "2025-12-30T02:00:00+01:00", "2025-12-30T03:00:00+01:00", "2025-12-30T04:00:00+01:00", "2025-12-30T05:00:00+01:00", "2025-12-30T06:00:00+01:00", "2025-12-30T07:00:00+01:00", "2025-12-30T08:00:00+01:00", "2025-12-30T09:00:00+01:00", "2025-12-30T10:00:00+01:00", "2025-12-30T11:00:00+01:00", "2025-12-30T12:00:00+01:00", "2025-12-30T13:00:00+01:00"], "ensemble": [[5.8, 6.6, 7.5, 9.1, 9.7, 10.4, 10.1, 9.9, 9.7, 9.4, 8.7, 8.1, 7.6, 7.1, 6.6, 6.4, 5.9, 5.6, 5.6, 5.5, 5.1, 5.0, 5.1, 4.9, 5.3, 6.0, 7.1, 8.2, 9.3, 10.2, 10.5, 10.2, 9.4, 8.4, 7.1, 6.5, 6.1, 5.5, 5.0, 4.6, 4.0, 3.2, 3.1, 2.2, 2.4, 2.8, 2.1, 2.2, 2.6, 3.1, 4.0, 4.5], [5.8, 7.0, 7.8, 9.2, 10.0, 11.2, 11.4, 10.1, 9.4, 9.1, 8.2, 7.2, 6.9, 7.2, 6.9, 6.3, 5.9, 5.8, 5.4, 4.9, 4.5, 4.7, 4.9, 4.9, 5.2, 5.8, 6.9, 7.9, 9.2, 9.9, 10.3, 10.4, 9.5, 8.7, 7.6, 6.7, 6.6, 6.3, 4.8, 4.6, 4.4, 4.1, 3.6, 3.3, 3.2, 3.2, 3.4, 3.2, 3.9, 5.5, 6.3, 7.5], [6.0, 7.4, 7.8, 9.3, 10.3, 10.8, 11.7, 11.9, 11.1, 10.5, 9.3, 9.1, 7.5, 7.2, 6.5, 6.1, 5.7, 5.5, 5.2, 4.9, 4.6, 4.1, 4.6, 4.5, 5.1, 6.2, 7.7, 9.1, 10.5, 10.6, 10.8, 10.4, 9.6, 8.8, 7.5, 6.6, 6.2, 5.6, 4.9, 4.4, 3.8, 3.4, 2.7, 2.5, 2.5, 2.0, 2.6, 2.5, 3.5, 4.7, 6.0, 7.4], [5.8, 7.2, 8.8, 9.4, 8.8, 8.6, 9.1, 9.6, 9.2, 8.8, 7.8, 7.2, 6.8, 6.6, 5.9, 5.7, 5.6, 5.2, 5.0, 5.4, 5.5, 4.9, 5.0, 5.3, 5.7, 6.4, 7.1, 7.9, 8.8, 9.7, 10.0, 9.9, 9.2, 7.9, 6.6, 6.1, 5.9, 5.6, 5.4, 5.0, 4.0, 3.4, 2.9, 2.7, 1.9, 1.9, 2.5, 2.5, 3.5, 4.6, 5.6, 7.1], [5.8, 6.8, 8.1, 9.2, 9.5, 10.2, 10.5, 10.6, 10.1, 8.2, 8.2, 7.5, 7.1, 6.3, 5.8, 5.5, 5.4, 5.1, 4.8, 4.7, 4.5, 4.3, 4.4, 4.5, 5.0, 5.5, 6.4, 7.4, 8.3, 9.5, 10.1, 10.0, 9.2, 8.5, 7.0, 6.4, 6.1, 5.2, 5.1, 4.6, 3.9, 3.5, 3.2, 2.8, 2.5, 2.3, 3.0, 3.0, 3.9, 4.8, 6.0, 7.2], [5.7, 6.6, 7.3, 8.5, 9.3, 10.5, 10.8, 10.5, 10.0, 9.9, 9.5, 7.9, 7.1, 6.3, 6.0, 5.5, 5.4, 5.0, 4.9, 4.8, 5.0, 4.9, 5.5, 5.5, 5.9, 6.7, 7.6, 8.7, 9.6, 9.9, 9.9, 9.8, 9.1, 8.5, 7.1, 6.3, 5.8, 5.4, 4.9, 4.7, 4.3, 3.7, 3.4, 3.2, 2.8, 2.6, 1.4, 0.3, 1.2, 2.1, 2.7, 3.3], [6.3, 7.2, 7.5, 8.1, 9.6, 10.9, 11.5, 11.7, 10.8, 9.8, 9.5, 8.9, 7.6, 7.2, 6.7, 6.4, 5.9, 5.7, 5.7, 5.9, 5.9, 5.9, 6.0, 5.5, 5.6, 6.0, 7.0, 8.1, 9.4, 10.0, 10.3, 10.3, 9.6, 8.8, 7.4, 6.7, 5.8, 5.5, 5.4, 5.1, 4.9, 3.8, 3.4, 3.1, 2.6, 2.4, 2.9, 2.8, 3.9, 5.2, 6.7, 8.2], [5.5, 6.2, 7.2, 7.3, 7.8, 9.2, 10.0, 9.9, 9.5, 8.9, 8.0, 7.3, 6.5, 6.1, 6.0, 5.7, 5.4, 5.6, 5.6, 5.4, 5.0, 4.9, 5.5, 5.5, 5.9, 6.2, 7.1, 7.9, 8.6, 9.1, 8.7, 8.4, 8.1, 7.2, 5.6, 4.9, 4.6, 4.3, 4.2, 4.4, 4.4, 3.9, 3.6, 3.0, 2.4, 2.2, 3.3, 2.8, 3.3, 4.2, 4.1, 5.1], [5.9, 6.7, 7.3, 8.6, 9.3, 9.3, 9.7, 9.6, 8.8, 8.6, 7.6, 7.1, 6.6, 6.5, 6.1, 5.7, 5.6, 5.6, 5.4, 5.3, 4.9, 4.7, 4.5, 4.3, 4.8, 5.8, 7.0, 8.2, 9.6, 10.4, 10.3, 9.8, 9.0, 8.3, 6.5, 5.5, 4.9, 4.6, 4.3, 3.7, 3.0, 2.2, 2.2, 2.8, 2.7, 2.3, 2.5, 2.9, 3.3, 4.0, 4.7, 4.9], [5.8, 5.9, 7.0, 8.6, 9.8, 8.9, 9.9, 10.1, 9.3, 7.8, 6.9, 6.4, 6.1, 6.1, 5.7, 5.6, 5.3, 5.1, 5.3, 5.2, 4.9, 4.3, 4.6, 4.3, 4.9, 5.7, 6.8, 8.1, 9.2, 10.3, 10.7, 10.5, 9.6, 8.8, 7.1, 6.4, 5.8, 5.4, 4.8, 4.3, 4.0, 3.6, 3.1, 2.7, 2.3, 2.4, 2.6, 2.4, 2.7, 3.7, 4.5, 5.0], [5.9, 7.5, 8.4, 9.5, 10.5, 10.9, 10.6, 10.9, 10.2, 9.3, 8.2, 7.4, 6.6, 5.9, 5.3, 5.0, 4.4, 4.9, 5.0, 5.0, 5.0, 5.1, 5.4, 5.1, 5.5, 5.9, 7.1, 8.3, 9.3, 9.8, 10.1, 10.2, 9.2, 8.5, 7.0, 6.8, 6.7, 5.9, 5.3, 4.0, 4.0, 3.9, 3.5, 3.1, 3.0, 2.9, 3.0, 2.7, 3.7, 4.7, 5.9, 7.4], [5.8, 7.1, 7.8, 8.6, 8.8, 9.4, 9.5, 9.5, 9.1, 8.1, 7.2, 6.7, 6.3, 6.0, 5.8, 5.6, 5.3, 5.0, 4.8, 4.8, 4.8, 4.2, 4.3, 4.4, 4.9, 5.3, 5.8, 6.4, 7.1, 8.5, 8.9, 8.9, 8.3, 7.8, 6.7, 5.8, 5.4, 5.7, 5.2, 5.1, 4.8, 3.6, 3.9, 3.8, 3.0, 2.7, 3.0, 3.0, 3.9, 5.0, 6.5, 7.5], [5.7, 6.9, 7.0, 8.4, 9.5, 10.0, 10.3, 9.6, 9.5, 9.6, 8.6, 8.5, 7.6, 6.6, 5.7, 5.4, 5.7, 5.5, 5.3, 4.7, 4.5, 4.2, 4.1, 3.9, 4.6, 5.4, 6.7, 8.1, 9.2, 9.8, 10.2, 10.4, 9.5, 8.7, 7.4, 6.5, 5.8, 5.5, 5.1, 4.9, 4.2, 3.8, 3.6, 3.1, 2.8, 2.7, 3.1, 2.8, 3.7, 4.8, 5.9, 6.9], [6.3, 7.1, 8.5, 9.5, 10.3, 10.0, 9.9, 10.6, 10.2, 9.7, 8.5, 8.2, 7.6, 6.7, 6.3, 6.2, 6.1, 5.6, 4.9, 4.5, 4.1, 3.8, 3.9, 3.8, 4.6, 5.4, 6.6, 8.1, 9.6, 10.6, 11.0, 11.1, 10.1, 9.2, 8.0, 7.4, 6.9, 6.5, 5.7, 5.5, 4.1, 4.0, 3.3, 3.0, 2.7, 2.2, 2.6, 2.6, 3.9, 5.1, 6.3, 7.6], [5.5, 5.7, 7.2, 8.5, 8.9, 9.3, 9.8, 9.6, 9.6, 9.3, 8.3, 7.0, 6.9, 6.6, 6.0, 5.3, 5.2, 5.0, 4.9, 4.8, 4.8, 5.1, 5.3, 5.2, 5.4, 6.1, 6.6, 7.7, 8.8, 9.6, 9.7, 9.6, 9.0, 8.0, 6.4, 6.2, 6.0, 5.2, 4.5, 4.1, 3.7, 3.3, 3.1, 2.2, 1.4, 1.6, 2.2, 2.6, 3.0, 3.2, 3.6, 4.2], [5.8, 6.2, 6.4, 6.7, 7.2, 7.5, 8.0, 8.3, 8.1, 8.0, 7.3, 7.2, 6.7, 6.2, 6.1, 5.7, 5.6, 5.6, 5.3, 5.1, 4.7, 4.4, 4.7, 4.5, 4.9, 5.5, 6.7, 8.1, 9.3, 10.1, 10.5, 10.2, 9.2, 8.4, 7.2, 6.7, 6.2, 5.7, 5.6, 4.3, 4.4, 4.0, 3.4, 3.2, 3.0, 2.7, 2.9, 2.7, 3.4, 3.1, 3.8, 4.4], [5.9, 7.5, 8.6, 9.6, 10.2, 9.8, 9.3, 8.9, 8.6, 8.7, 8.1, 7.8, 7.1, 6.6, 6.0, 5.9, 5.9, 6.0, 5.5, 5.2, 5.1, 4.7, 5.0, 5.0, 5.5, 6.2, 7.3, 8.3, 9.4, 10.2, 10.3, 10.1, 9.6, 8.7, 7.4, 6.7, 6.2, 5.7, 5.3, 4.7, 4.4, 3.6, 3.4, 2.6, 2.1, 2.0, 2.1, 2.5, 3.1, 3.6, 4.3, 4.9], [5.5, 6.4, 7.1, 8.2, 9.1, 10.0, 10.7, 10.9, 10.2, 9.2, 7.8, 6.6, 6.1, 6.0, 5.7, 5.5, 5.2, 5.1, 5.0, 5.0, 5.0, 4.8, 4.6, 4.5, 5.1, 5.9, 7.1, 8.4, 9.5, 9.9, 10.2, 10.1, 9.3, 8.5, 7.6, 6.8, 6.0, 5.2, 4.9, 4.6, 4.7, 4.5, 3.6, 3.5, 3.0, 2.9, 3.6, 3.0, 4.6, 5.3, 6.4, 7.6], [5.7, 6.4, 7.6, 8.4, 8.8, 9.6, 9.7, 9.3, 9.0, 7.9, 7.0, 6.8, 6.1, 5.8, 5.5, 5.4, 5.3, 5.3, 5.0, 4.7, 4.5, 4.0, 4.2, 4.2, 5.1, 5.8, 7.0, 8.2, 9.2, 10.0, 10.5, 10.5, 9.7, 8.5, 7.0, 6.9, 6.5, 6.3, 5.6, 5.0, 4.6, 4.1, 3.5, 3.0, 2.5, 2.1, 2.1, 1.8, 2.1, 2.6, 3.2, 3.7], [6.1, 7.3, 7.9, 8.9, 9.4, 10.1, 10.4, 10.0, 9.1, 9.4, 8.6, 7.7, 7.4, 7.0, 6.4, 6.0, 5.8, 5.8, 5.7, 5.4, 5.5, 5.2, 5.3, 5.0, 6.0, 7.1, 8.1, 8.8, 9.0, 9.7, 9.9, 9.9, 9.3, 8.3, 7.0, 6.3, 6.0, 5.7, 5.5, 5.2, 4.9, 3.8, 3.2, 3.0, 2.6, 2.4, 3.0, 3.0, 3.7, 4.8, 5.8, 7.1], [6.2, 7.4, 7.9, 9.5, 10.0, 8.8, 9.1, 8.9, 8.5, 7.8, 7.1, 6.9, 6.6, 6.3, 5.8, 5.4, 5.2, 4.9, 5.2, 5.2, 5.0, 4.8, 5.0, 5.0, 5.1, 5.3, 5.9, 7.0, 8.5, 9.4, 9.7, 9.6, 9.0, 8.4, 6.8, 6.0, 5.6, 5.2, 5.3, 4.4, 3.8, 3.7, 3.3, 3.0, 2.7, 1.8, 1.4, 0.6, 1.4, 2.2, 3.3, 4.7], [5.6, 7.3, 8.1, 8.8, 10.0, 10.9, 11.2, 11.2, 10.9, 10.3, 9.4, 8.7, 7.3, 6.6, 6.4, 5.9, 5.6, 5.6, 5.3, 5.2, 5.3, 4.9, 4.7, 4.5, 4.8, 5.7, 7.2, 8.7, 9.8, 10.5, 10.8, 10.7, 9.8, 9.1, 7.6, 6.8, 6.1, 5.8, 5.4, 4.5, 3.9, 3.6, 3.1, 2.8, 2.6, 2.4, 2.7, 2.6, 3.6, 4.9, 5.7, 6.2], [5.9, 6.8, 7.4, 8.1, 10.0, 11.1, 11.5, 11.9, 9.9, 9.6, 8.6, 8.0, 7.4, 6.8, 6.7, 6.1, 6.0, 5.8, 5.7, 5.4, 4.9, 4.6, 5.0, 4.9, 5.5, 6.4, 7.7, 8.9, 9.9, 10.5, 10.7, 10.7, 9.9, 9.0, 7.7, 6.9, 6.6, 6.3, 5.5, 4.8, 4.8, 4.6, 4.0, 3.6, 3.4, 3.0, 3.3, 3.5, 4.2, 5.4, 6.5, 7.9], [5.8, 6.3, 7.7, 9.0, 9.4, 8.8, 8.9, 8.8, 8.4, 7.8, 7.3, 7.1, 6.9, 6.3, 5.9, 5.7, 5.5, 5.2, 4.9, 4.5, 4.9, 4.9, 5.5, 5.6, 5.5, 5.9, 6.2, 6.9, 8.2, 9.4, 9.8, 9.8, 9.0, 8.3, 6.7, 6.1, 5.4, 4.8, 4.4, 4.2, 4.0, 3.6, 3.3, 2.8, 2.4, 2.0, 2.7, 2.8, 3.6, 4.5, 5.8, 6.7]], "ctrl": [5.7, 6.8, 8.0, 9.0, 10.0, 10.6, 10.8, 10.6, 9.9, 9.6, 8.2, 7.5, 6.7, 6.2, 6.3, 6.0, 5.8, 5.3, 5.1, 5.3, 5.4, 5.3, 5.2, 5.1, 5.2, 5.9, 7.0, 8.2, 9.6, 10.2, 10.2, 10.3, 9.7, 8.8, 7.5, 6.8, 6.3, 6.0, 5.7, 4.3, 4.4, 3.8, 3.5, 3.3, 2.9, 2.7, 3.1, 2.9, 3.8, 4.9, 6.2, 7.6], "actual": [6.2, 7.5, 8.2, 9.1, 10.2, 11.1, 11.0, 10.3, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN], "daily_extremes": [{"date": "2025-12-28T00:00:00", "tmin": 5.5, "tmax": 11.9, "tmin_time": "2025-12-28T10:00:00+01:00", "tmax_time": "2025-12-28T17:00:00+01:00"}, {"date": "2025-12-29T00:00:00", "tmin": 3.8, "tmax": 11.1, "tmin_time": "2025-12-29T07:00:00+01:00", "tmax_time": "2025-12-29T17:00:00+01:00"}, {"date": "2025-12-30T00:00:00", "tmin": 0.3, "tmax": 8.2, "tmin_time": "2025-12-30T09:00:00+01:00", "tmax_time": "2025-12-30T13:00:00+01:00"}], "climatology": {"tmax": {"upper": 7.631, "lower": 11.051333333333334}, "tmin": {"upper": 0.7816666666666666, "lower": 5.142666666666667}}};

const svg = d3.select("svg");
const margin = { top: 30, right: 20, bottom: 40, left: 55 };
const width = +svg.attr("width") - margin.left - margin.right;
const height = +svg.attr("height") - margin.top - margin.bottom;

const g = svg.append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

const tooltip = d3.select("#tooltip");

const time = data.time.map(d3.isoParse);

// -------------------- scales --------------------
const allValues = [
    ...data.ctrl,
    ...data.ensemble.flat(),
    ...data.actual.filter(d => d !== null)
];

const x = d3.scaleTime()
    .domain(d3.extent(time))
    .range([0, width]);

const y = d3.scaleLinear()
    .domain([d3.min(allValues)-1, d3.max(allValues)+1])
    .range([height, 0]);

// -------------------- climatology bands --------------------
["tmax","tmin"].forEach(key => {
    g.append("rect")
        .attr("x", 0)
        .attr("y", y(data.climatology[key].upper))
        .attr("width", width)
        .attr("height",
            y(data.climatology[key].lower) -
            y(data.climatology[key].upper)
        )
        .attr("fill", key === "tmax" ? "#ff5252" : "#2979ff")
        .attr("opacity", 0.95);
});

// -------------------- ensemble --------------------
const line = d3.line()
    .x((d,i) => x(time[i]))
    .y(d => y(d));

g.selectAll(".ens")
    .data(data.ensemble)
    .enter()
    .append("path")
    .attr("fill","none")
    .attr("stroke","#90caf9")
    .attr("stroke-opacity",0.35)
    .attr("stroke-width",1)
    .attr("d", d => line(d));

// -------------------- CTRL --------------------
g.append("path")
    .datum(data.ctrl)
    .attr("fill","none")
    .attr("stroke","#ffffff")
    .attr("stroke-width",3)
    .attr("d", line);

// -------------------- ACTUAL (CONTINUOUS) --------------------
g.append("path")
    .datum(data.actual)
    .attr("fill","none")
    .attr("stroke","#00e676")
    .attr("stroke-width",3)
    .attr("d", line);

// -------------------- daily labels --------------------
data.daily_extremes.forEach(d => {
    g.append("text")
        .attr("x", x(new Date(d.tmax_time)))
        .attr("y", y(d.tmax) - 6)
        .attr("fill","#ff5252")
        .attr("font-weight",600)
        .text(d.tmax.toFixed(1));

    g.append("text")
        .attr("x", x(new Date(d.tmin_time)))
        .attr("y", y(d.tmin) + 14)
        .attr("fill","#2979ff")
        .attr("font-weight",600)
        .text(d.tmin.toFixed(1));
});

// -------------------- axes --------------------
g.append("g")
    .attr("class","axis")
    .attr("transform",`translate(0,${height})`)
    .call(d3.axisBottom(x).ticks(8));

g.append("g")
    .attr("class","axis")
    .call(d3.axisLeft(y));

// -------------------- hover interaction --------------------
const bisect = d3.bisector(d => d).left;

g.append("rect")
    .attr("width", width)
    .attr("height", height)
    .attr("fill", "none")
    .attr("pointer-events", "all")
    .on("mousemove", (event) => {
        const [mx] = d3.pointer(event);
        const idx = Math.max(0, Math.min(
            time.length - 1,
            bisect(time, x.invert(mx))
        ));

        const ens = data.ensemble.map(m => m[idx]).sort(d3.ascending);

        const stats = {
            mean: d3.mean(ens),
            p10: d3.quantile(ens, 0.1),
            p25: d3.quantile(ens, 0.25),
            p50: d3.quantile(ens, 0.5),
            p75: d3.quantile(ens, 0.75),
            p90: d3.quantile(ens, 0.9),
        };

        tooltip
            .style("opacity", 1)
            .style("left", (event.pageX + 15) + "px")
            .style("top", (event.pageY + 15) + "px")
            .html(`
                <div class="title">${time[idx].toLocaleString()}</div>
                <div class="row"><span>Mean</span><span>${stats.mean.toFixed(1)}°C</span></div>
                <div class="row"><span>P10 / P90</span><span>${stats.p10.toFixed(1)} – ${stats.p90.toFixed(1)}°C</span></div>
                <div class="row"><span>P25 / P75</span><span>${stats.p25.toFixed(1)} – ${stats.p75.toFixed(1)}°C</span></div>
                <div class="row"><span>Median</span><span>${stats.p50.toFixed(1)}°C</span></div>
                <div class="row"><span>CTRL</span><span>${data.ctrl[idx].toFixed(1)}°C</span></div>
                ${
                    data.actual[idx] !== null
                    ? `<div class="row"><span>Actual</span><span>${data.actual[idx].toFixed(1)}°C</span></div>`
                    : ""
                }
            `);
    })
    .on("mouseleave", () => {
        tooltip.style("opacity", 0);
    });
</script>
</body>
</html>
